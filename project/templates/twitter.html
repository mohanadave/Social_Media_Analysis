<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>Social Media Analysis</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
        integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
  <!-- Custom fonts for this template-->
  <link href="{{ url_for('static',filename='vendor/fontawesome-free/css/all.min.css') }}" rel="stylesheet"
        type="text/css">
  <link href="{{ url_for('static',filename='vendor/datatables/dataTables.bootstrap4.css') }}" rel="stylesheet"
        type="text/css">
  <!-- Page level plugin CSS-->
  <link href="" rel="stylesheet">
  <script type="text/JavaScript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script type="text/JavaScript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
  <script type="text/JavaScript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
  <link href="{{ url_for('static',filename='css/sb-admin.css') }}" rel="stylesheet">
  <script src="{{ url_for('static',filename='js/sb-admin.min.js') }}"></script>
  <script src="{{ url_for('static', filename='vendor/jquery/jquery.min.js') }}"></script>
  <script src="{{ url_for('static', filename='vendor/jquery-easing/jquery.easing.min.js') }}"></script>
  <script src="{{ url_for('static',filename='vendor/jquery/jquery.min.js') }}"></script>
  <script src="{{ url_for('static',filename='vendor/jquery-easing/jquery.easing.min.js') }}"></script>
  <script src="{{ url_for('static',filename='vendor/chart.js/Chart.min.js') }}"></script>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>LC Lightbox - Image Gallery Demo</title>


  <!-- PAGE'S BASE CSS -->
  <style type="text/css">
    * {
      box-sizing: border-box;
    }

    .img-magnifier-container {
      position: relative;
    }

    .img-magnifier-glass {
      position: absolute;
      border: 3px solid #000;
      border-radius: 50%;
      cursor: none;
      /*Set the size of the magnifier glass:*/
      width: 75px;
      height: 75px;
    }

    /*! normalize.css v2.1.2 | MIT License | git.io/normalize */

    audio, canvas, video {
      display: inline-block
    }

    audio:not([controls]) {
      display: none;
      height: 0
    }

    [hidden] {
      display: none
    }

    html {
      font-family: sans-serif;
      -ms-text-size-adjust: 100%;
      -webkit-text-size-adjust: 100%
    }

    body {
      margin: 0
    }


    abbr[title] {
      border-bottom: 1px dotted
    }

    b, strong {
      font-weight: 700
    }


    button, input {
      line-height: normal
    }

    button, select {
      text-transform: none
    }

    button, html input[type=button], input[type=reset], input[type=submit] {
      -webkit-appearance: button;
      cursor: pointer
    }

    button[disabled], html input[disabled] {
      cursor: default
    }

    input[type=checkbox], input[type=radio] {
      box-sizing: border-box;
      padding: 0
    }

    input[type=search] {
      -webkit-appearance: textfield;
      -moz-box-sizing: content-box;
      -webkit-box-sizing: content-box;
      box-sizing: content-box
    }

    input[type=search]::-webkit-search-cancel-button, input[type=search]::-webkit-search-decoration {
      -webkit-appearance: none
    }

    button::-moz-focus-inner, input::-moz-focus-inner {
      border: 0;
      padding: 0
    }

    textarea {
      overflow: auto;
      vertical-align: top
    }

    table {
      border-collapse: collapse;
      border-spacing: 0
    }


    body {
      font: 14px/20px Arial, sans-serif;
    {#background-color: #4E5869;#} margin: 0;
      padding: 0;
      color: #000
    }

    dl, ol, ul {
      padding: 0;
      margin: 0
    }


    @media screen and (max-width: 500px) {
      .content > div {
        width: 100% !important
      }
    }


    .elem, .elem * {
      box-sizing: border-box;
      margin: 0 !important;
    }

    .elem {
      display: inline-block;
      font-size: 0;
      width: 33%;
      border: 20px solid transparent;
      border-bottom: none;
      background: #cbd3da;
      padding: 10px;
      height: auto;
      background-clip: padding-box;
    }

    .elem > span {
      display: block;
      cursor: pointer;
      height: 0;
      padding-bottom: 70%;
      background-size: cover;
      background-position: center center;
    }
  </style>


  <!-- LIGHTBOX FADING SHOW/HIDE EFFECT (as explained in documentation) -->
  <style type="text/css">
    .lcl_fade_oc.lcl_pre_show #lcl_overlay,
    .lcl_fade_oc.lcl_pre_show #lcl_window,
    .lcl_fade_oc.lcl_is_closing #lcl_overlay,
    .lcl_fade_oc.lcl_is_closing #lcl_window {
      opacity: 0 !important;
    }

    .lcl_fade_oc.lcl_is_closing #lcl_overlay {
      -webkit-transition-delay: .15s !important;
      transition-delay: .15s !important;
    }
  </style>


  <!-- //////////////////////////////////////////////// -->
  <!-- REQUIRED ELEMENTS -->

  <script src="{{ url_for('static',filename='lib_img/jquery.js') }}" type="text/javascript"></script>
  <script src="{{ url_for('static',filename='js_img/lc_lightbox.lite.js') }}" type="text/javascript"></script>
  <link href="{{ url_for('static',filename='css_img/lc_lightbox.css') }}" rel="stylesheet">
  <link href="{{ url_for('static',filename='skins_img/minimal.css') }}" rel="stylesheet">
  <script src="{{ url_for('static',filename='lib_img/AlloyFinger/alloy_finger.min.js') }}"
          type="text/javascript"></script>

  <!-- //////////////////////////////////////////////// -->
  <!-- //////////////////////////////////////////////// -->

  <style type="text/css">
    .on_hover_animate {
      height: 100px;
      -webkit-transition: height 2s; /* For Safari 3.1 to 6.0 */
      transition: height 2s;
    }

    .n-resize {
      cursor: n-resize;
    }

    .s-resize {
      cursor: s-resize;
    }

    img {
      max-width: 100%;
      max-height: 100%;
      /*display: inline-block;*/
    }

    .portrait {
      height: 240px;
      width: 160px;
      display: inline-block;
    }

    .landscape {
      height: 240px;
      width: 360px;
      display: inline-block;
    }

    .square {
      height: 240px;
      width: 240px;
      display: inline-block;
    }

    .thumb {
      height: 150px;
      width: 150px;
      display: inline-grid;
    }

    .nag {
      font-size: 14px;
      font-weight: bold;
      color: #008000;
    }

    .cag {
      font-size: 14px;
      font-weight: bold;
      color: #e6b800;
    }

    .oag {
      font-size: 14px;
      font-weight: bold;
      color: #FF0000;
    }
  </style>
  {#  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>#}
  <script type="text/javascript">
    function magnify(imgID, zoom) {
      var img, glass, w, h, bw;
      img = document.getElementById(imgID);

      /* Create magnifier glass: */
      glass = document.createElement("DIV");
      glass.setAttribute("class", "img-magnifier-glass");

      /* Insert magnifier glass: */
      img.parentElement.insertBefore(glass, img);

      /* Set background properties for the magnifier glass: */
      glass.style.backgroundImage = "url('" + img.src + "')";
      glass.style.backgroundRepeat = "no-repeat";
      glass.style.backgroundSize = (img.width * zoom) + "px " + (img.height * zoom) + "px";
      bw = 3;
      w = glass.offsetWidth / 2;
      h = glass.offsetHeight / 2;

      /* Execute a function when someone moves the magnifier glass over the image: */
      glass.addEventListener("mousemove", moveMagnifier);
      img.addEventListener("mousemove", moveMagnifier);

      /*and also for touch screens:*/
      glass.addEventListener("touchmove", moveMagnifier);
      img.addEventListener("touchmove", moveMagnifier);

      function moveMagnifier(e) {
        var pos, x, y;
        /* Prevent any other actions that may occur when moving over the image */
        e.preventDefault();
        /* Get the cursor's x and y positions: */
        pos = getCursorPos(e);
        x = pos.x;
        y = pos.y;
        /* Prevent the magnifier glass from being positioned outside the image: */
        if (x > img.width - (w / zoom)) {
          x = img.width - (w / zoom);
        }
        if (x < w / zoom) {
          x = w / zoom;
        }
        if (y > img.height - (h / zoom)) {
          y = img.height - (h / zoom);
        }
        if (y < h / zoom) {
          y = h / zoom;
        }
        /* Set the position of the magnifier glass: */
        glass.style.left = (x - w) + "px";
        glass.style.top = (y - h) + "px";
        /* Display what the magnifier glass "sees": */
        glass.style.backgroundPosition = "-" + ((x * zoom) - w + bw) + "px -" + ((y * zoom) - h + bw) + "px";
      }

      function getCursorPos(e) {
        var a, x = 0, y = 0;
        e = e || window.event;
        /* Get the x and y positions of the image: */
        a = img.getBoundingClientRect();
        /* Calculate the cursor's x and y coordinates, relative to the image: */
        x = e.pageX - a.left;
        y = e.pageY - a.top;
        /* Consider any page scrolling: */
        x = x - window.pageXOffset;
        y = y - window.pageYOffset;
        return {x: x, y: y};
      }
    }

    function load_graph(elem_id) {
      Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
      Chart.defaults.global.defaultFontColor = '#292b2c';

      // Bar Chart Example
      var ctx = document.getElementById(elem_id, counter);
      {#var counter=JSON.toString(counter);#}
      {#var counter=JSON.parse(counter);#}
      console.log(typeof (counter));
      {#alert(counter.NAG);#}
      console.log('-------------', counter.NAG);
      var colors = ['#007bff', '#28a745', '#333333', '#c3e6cb', '#dc3545', '#6c757d'];
      var myLineChart = new Chart(ctx, {
        type: 'pie',
        scaleOverride: true,
        data: {
          labels: ["NAG", "CAG", "OAG"],
          datasets: [{
            backgroundColor: ["#008000", "#e6b800", "#FF0000"],
            data: [counter[0], counter[1], counter[2]],
          }
          ],
        },
      });
    }
  </script>
</head>
<body id="page-top">
<nav class="navbar navbar-expand navbar-dark bg-dark static-top">
  <a class="navbar-brand mr-1" href="index.html">Social Media Analysis</a>
  <button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#">
    <i class="fas fa-bars"></i>
  </button>
  <!-- Navbar Search -->
  <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0">
    <div class="input-group">
      <input type="hidden" class="form-control" placeholder="Search for..." aria-label="Search"
             aria-describedby="basic-addon2">
    </div>
  </form>
  <button class="btn btn-danger">Logout</button>
  <!-- Navbar -->
  <ul class="navbar-nav ml-auto ml-md-0">
  </ul>
</nav>
<div id="wrapper">
  <!-- Sidebar -->
  <ul class="sidebar navbar-nav">
    <li class="nav-item active">
      <a class="nav-link" href="index.html">
        <i class="fas fa-fw fa-tachometer-alt"></i>
        <span>Twitter</span>
      </a>
    </li>
  </ul>
  <div id="content-wrapper">
    <div class="container-fluid">
      <!-- Breadcrumbs-->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="#">Dashboard</a>
        </li>
        <li class="breadcrumb-item active">Twitter</li>
      </ol>
      <!-- Icon Cards-->
      <div class="container-fluid text-center">
        {% set tweet_counter = {'count': 0} %}
        {% for tweet in all_embed %}
          <hr>
          <div class="row" style="padding-top: 15px;">

            {% set counter = {'NAG': 0,'CAG': 0,'OAG': 0  } %}
            <div class="card" id="card_{{ tweet.tweet.id_str }}">
              <div class="card-header text-left" id="card_{{ tweet.tweet.id_str }}">
                <h4>
                  <img src="{{ tweet.tweet.user.profile_image_url }}" class="img-circle"
                       style="border-radius: 50%;">&nbsp;&nbsp;
                  <b><a style="color: deepskyblue;"
                        href="https://twitter.com/{{ tweet.tweet.user.screen_name }}"
                        target="_blank">@{{ tweet.tweet.user.screen_name }}
                    {% if tweet.tweet.user.verified %}
                      <span class="fa fa-stack fa-lg" style="font-size: 8px">
                            <i class="fa fa-certificate fa-stack-2x" style="color: deepskyblue;"></i>
                            <i class="fa fa-check fa-stack-1x fa-inverse"></i>
                            </span>
                    {% endif %}
                  </a>
                  </b>
                </h4>
              </div>
              <div class="card-body card_body_animate" id="card_body_{{ tweet.tweet.id_str }}">
                <div class="row">
                  <div class="col-sm-8 text-left" id="middle">
                    {% if 'retweeted_status' not in tweet.tweet %}
                      <h5>
                        <p>
                          <b>Tweet:-
                          </b>
                          {{ tweet.tweet.full_text }}
                        </p>
                      </h5>
                      {% if 'extended_entities' in tweet.tweet %}
                        {% if tweet.tweet.extended_entities.media %}
                          {#                          {% if len(tweet.tweet.extended_entities.media) == 1 %}#}
                          {#                            {% if tweet.tweet.extended_entities.media[0].sizes.small.h > tweet.tweet.extended_entities.media[0].sizes.small.w %}#}
                          {#                              <div class="portrait">#}
                          {#                                <img src={{ tweet.tweet.extended_entities.media[0].media_url_https }}>#}
                          {#                              </div>#}
                          {#                            {% elif tweet.tweet.extended_entities.media[0].sizes.small.h < tweet.tweet.extended_entities.media[0].sizes.small.w %}#}
                          {#                              <div class="landscape">#}
                          {#                                <img src={{ tweet.tweet.extended_entities.media[0].media_url_https }}>#}
                          {#                              </div>#}
                          {#                            {% else %}#}
                          {#                              <div class="square">#}
                          {#                                <img src={{ tweet.tweet.extended_entities.media[0].media_url_https }}>#}
                          {#                              </div>#}
                          {#                            {% endif %}#}
                          {#                          {% else %}#}
                          {#                            <div class="align-content-center w-100" style="max-height: 300px">#}
                          {#                              <div id="carousel_{{ tweet.tweet.id_str }}" class="carousel slide w-auto h-auto bg-dark"#}
                          {#                                   data-ride="carousel" data-interval=false>#}
                          {#                                <ol class="carousel-indicators">#}
                          {#                                  <li data-target="#carousel_{{ tweet.tweet.id_str }}"#}
                          {#                                      data-slide-to="0" class="active"></li>#}
                          {#                                  {% for i in range(1,len(tweet.tweet.extended_entities.media)) %}#}
                          {#                                    <li data-target="#carousel_{{ tweet.tweet.id_str }}"#}
                          {#                                        data-slide-to="{{ i }}"></li>#}
                          {#                                  {% endfor %}#}
                          {#                                </ol>#}
                          {#                                <div class="carousel-inner">#}
                          {#                                  <div class="carousel-item active">#}
                          {#                                    {% if tweet.tweet.extended_entities.media[0].sizes.thumb.h > tweet.tweet.extended_entities.media[0].sizes.thumb.w %}#}
                          {#                                      <div>#}
                          {#                                      {{ tweet.tweet.extended_entities.media[0].sizes.thumb.h }}#}
                          {#                                        1#}
                          {#                                        <img class="d-block w-100"#}
                          {#                                             height="{{ tweet.tweet.extended_entities.media[0].sizes.thumb.h }}"#}
                          {#                                             src={{ tweet.tweet.extended_entities.media[0].media_url_https }}>#}
                          {#                                      </div>#}
                          {#                                    {% elif tweet.tweet.extended_entities.media[0].sizes.small.h < tweet.tweet.extended_entities.media[0].sizes.small.w %}#}
                          {#                                      <div>#}
                          {#                                        2#}
                          {#                                        <img class="d-block w-auto h-100"#}
                          {#                                             src={{ tweet.tweet.extended_entities.media[0].media_url_https }}>#}
                          {#                                      </div>#}
                          {#                                    {% else %}#}
                          {#                                      <div>#}
                          {#                                        3#}
                          {#                                        <img class="d-block w-auto h-100"#}
                          {#                                             src={{ tweet.tweet.extended_entities.media[0].media_url_https }}>#}
                          {#                                      </div>#}
                          {#                                    {% endif %}#}
                          {#                                  </div>#}
                          {#                                  {% for media in tweet.tweet.extended_entities.media[1:] %}#}
                          {#                                    <div class="carousel-item">#}
                          {#                                      {% if media.sizes.small.h > media.sizes.small.w %}#}
                          {#                                        <div class="portrait">#}
                          {#                                          <img class="d-block w-100"#}
                          {#                                               src={{ media.media_url_https }}>#}
                          {#                                        </div>#}
                          {#                                      {% elif media.sizes.small.h < media.sizes.small.w %}#}
                          {#                                        <div class="landscape">#}
                          {#                                          <img class="d-block w-100"#}
                          {#                                               src={{ media.media_url_https }}>#}
                          {#                                        </div>#}
                          {#                                      {% else %}#}
                          {#                                        <div class="square">#}
                          {#                                          <img class="d-block w-100"#}
                          {#                                               src={{ media.media_url_https }}>#}
                          {#                                        </div>#}
                          {#                                      {% endif %}#}
                          {#                                    </div>#}
                          {#                                  {% endfor %}#}
                          {#                                </div>#}
                          {#                                <a class="carousel-control-prev"#}
                          {#                                   href="#carousel_{{ tweet.tweet.id_str }}" role="button"#}
                          {#                                   data-slide="prev">#}
                          {#                                                            <span class="carousel-control-prev-icon"#}
                          {#                                                                  aria-hidden="true"></span>#}
                          {#                                  <span class="sr-only">Previous</span>#}
                          {#                                </a>#}
                          {#                                <a class="carousel-control-next"#}
                          {#                                   href="#carousel_{{ tweet.tweet.id_str }}" role="button"#}
                          {#                                   data-slide="next">#}
                          {#                                                            <span class="carousel-control-next-icon"#}
                          {#                                                                  aria-hidden="true"></span>#}
                          {#                                  <span class="sr-only">Next</span>#}
                          {#                                </a>#}
                          {#                              </div>#}
                          {#                            </div>#}
                          <div class="content">
                            {% for media in tweet.tweet.extended_entities.media[:] %}
                              {% if media.type == 'photo' %}
                                <a class="elem" name="elem_{{ tweet.tweet.id_str | safe }}"
                                   href="{{ media.media_url_https }}"
                                   title="image 1" data-lcl-txt="lorem ipsum dolor sit amet" data-lcl-author="someone"
                                   data-lcl-thumb="{{ media.media_url_https }}">
                                  <span style="background-image: url({{ media.media_url_https }});"></span>
                                </a>
                              {% else %}
                                <video width="150" height="150" controls>
                                  <source src="{{ media.video_info.variants[-1].url }}" type="video/mp4">
                                </video>
                              {% endif %}
                            {% endfor %}
                          </div>
                          <script type="text/javascript">
                            $(document).ready(function (e) {

                              // live handler
                              console.log('elem', $('[name=elem_{{ tweet.tweet.id_str | safe }}]'));
                              lc_lightbox('[name=elem_{{ tweet.tweet.id_str | safe }}]', {
                                wrap_class: 'lcl_fade_oc',
                                gallery: true,
                                thumb_attr: 'data-lcl-thumb',

                                skin: 'minimal',
                                radius: 0,
                                padding: 0,
                                border_w: 0,
                              });

                            });
                          </script>
                          {#                          {% endif %}#}
                        {% endif %}
                      {% endif %}
                      {#                                    {% endif %}#}
                    {% else %}
                      <small class="text-muted" style="font-weight:lighter;"><i
                              class="fas fa-retweet">{{ tweet.tweet.user.name }} retweeted</i></small>
                    {% endif %}
                    {% if tweet.tweet.is_quote_status or 'retweeted_status' in tweet.tweet %}
                      <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                          {% if tweet.tweet.retweeted_status %}
                            <img src="{{ tweet.tweet.retweeted_status.user.profile_image_url }}"
                                 class="img-circle"
                                 style="border-radius: 50%; width:30px; height:30px">&nbsp;&nbsp;
                            <b>{{ tweet.tweet.retweeted_status.user.name }}</b>
                            <i style="font-weight: lighter;">@{{ tweet.tweet.retweeted_status.user.screen_name }}</i>
                            <hr>
                            {{ tweet.tweet.retweeted_status.full_text }}<br>
                            {% if 'extended_entities' in tweet.tweet.retweeted_status %}
                              <div class="thumb">
                                <div class="content">
                                  {% for media in tweet.tweet.retweeted_status.extended_entities.media[:] %}
                                    {% if media.type == 'photo' %}
                                      <a class="elem" name="elem_{{ tweet.tweet.id_str | safe }}"
                                         href="{{ media.media_url_https }}"
                                         title="image 1" data-lcl-txt="lorem ipsum dolor sit amet"
                                         data-lcl-author="someone"
                                         data-lcl-thumb="{{ media.media_url_https }}">
                                        <span style="background-image: url({{ media.media_url_https }});"></span>
                                      </a>
                                    {% else %}
                                      <video width="150" height="150" controls>
                                        <source src="{{ media.video_info.variants[-1].url }}" type="video/mp4">
                                      </video>
                                    {% endif %}
                                  {% endfor %}
                                </div>
                                <script type="text/javascript">
                                  $(document).ready(function (e) {

                                    // live handler
                                    console.log('elem', $('[name=elem_{{ tweet.tweet.id_str | safe }}]'));
                                    lc_lightbox('[name=elem_{{ tweet.tweet.id_str | safe }}]', {
                                      wrap_class: 'lcl_fade_oc',
                                      gallery: true,
                                      thumb_attr: 'data-lcl-thumb',

                                      skin: 'minimal',
                                      radius: 0,
                                      padding: 0,
                                      border_w: 0,
                                    });

                                  });
                                </script>
                              </div>
                            {% endif %}
                          {% elif tweet.tweet.quoted_status %}
                            <img src="{{ tweet.tweet.quoted_status.user.profile_image_url }}"
                                 class="img-circle"
                                 style="border-radius: 50%; width:30px; height:30px">&nbsp;&nbsp;
                            <b>{{ tweet.tweet.quoted_status.user.name }}</b>
                            <i style="font-weight: lighter;">@{{ tweet.tweet.quoted_status.user.screen_name }}</i>
                            <hr>
                            {{ tweet.tweet.quoted_status.full_text }}<br>
                            {% if 'extended_entities' in tweet.tweet.quoted_status %}
                              <div class="thumb">
                                <div class="content">
                                  {% for media in tweet.tweet.quoted_status.extended_entities.media[:] %}
                                    {% if media.type == 'photo' %}
                                      <a class="elem" name="elem_{{ tweet.tweet.id_str | safe }}"
                                         href="{{ media.media_url_https }}"
                                         title="image 1" data-lcl-txt="lorem ipsum dolor sit amet"
                                         data-lcl-author="someone"
                                         data-lcl-thumb="{{ media.media_url_https }}">
                                        <span style="background-image: url({{ media.media_url_https }});"></span>
                                      </a>
                                    {% else %}
                                      <video width="150" height="150" controls>
                                        <source src="{{ media.video_info.variants[-1].url }}" type="video/mp4">
                                      </video>
                                    {% endif %}
                                  {% endfor %}
                                </div>
                                <script type="text/javascript">
                                  $(document).ready(function (e) {

                                    // live handler
                                    console.log('elem', $('[name=elem_{{ tweet.tweet.id_str | safe }}]'));
                                    lc_lightbox('[name=elem_{{ tweet.tweet.id_str | safe }}]', {
                                      wrap_class: 'lcl_fade_oc',
                                      gallery: true,
                                      thumb_attr: 'data-lcl-thumb',

                                      skin: 'minimal',
                                      radius: 0,
                                      padding: 0,
                                      border_w: 0,
                                    });

                                  });
                                </script>
                              </div>
                            {% endif %}
                          {% endif %}
                        </li>
                      </ol>
                    {% endif %}
                    <div class="table-responsive table-hover" style="height: 0px;"
                         id="replies_{{ tweet.tweet.id_str }}">
                      <section>
                      </section>
                      <table class="table" id="dataTable_{{ tweet.tweet.id_str }}" width="100%">
                        <thead>
                        <tr>
                          <th>Name</th>
                          <th>Text</th>
                          <th></th>
                          <!-- <th>In reply to</th> -->
                        </tr>
                        </thead>
                        <tbody>
                        {% macro increment(dct, key, inc=1) %}
                          {% if dct.update({key: dct[key] + inc}) %} {% endif %}
                        {% endmacro %}
                        {% macro decrement(dct, key, inc=1) %}
                          {% if dct.update({key: dct[key] - inc}) %} {% endif %}
                        {% endmacro %}
                        {% if tweet.replies %}
                          <hr>
                          {% for reply in tweet.replies %}
                            <tr style="font-size: 15px;">
                              <td style="font-size: 14px;" width="35%">
                                {#                                <img#}
                                {#                                      src="{{ reply.user.profile_image_url }}"#}
                                {#                                      style="border-radius: 50%; width: 30px; height: 30px;">#}
                                @{{ reply.user.screen_name }}
                              </td>

                              {% if reply.reply_type=="0" %}
                                {{ increment(counter, 'NAG') }}
                                <td class="nag" width="65%">
                                  {{ reply.full_text }}</td>
                              {% elif reply.reply_type=="50" %}
                                {{ increment(counter, 'CAG') }}
                                <td class="cag" width="65%">
                                  {{ reply.full_text }}</td>
                              {% elif reply.reply_type=="100" %}
                                {{ increment(counter, 'OAG') }}
                                <td class="oag" width="65%">
                                  {{ reply.full_text }}</td>
                              {% endif %}
                              <td>
                                <button type="button" class="btn btn-light" data-toggle="modal"
                                        data-target="#modal_{{ reply.id_str }}">
                                  <i class="fas fa-ellipsis-v" aria-hidden="true"></i></button>
                                {#                                </button>#}

                                <!-- Modal -->
                                <div class="modal fade" id="modal_{{ reply.id_str }}" role="dialog">
                                  <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <h4 class="modal-title">Report incorrect judgement</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                      </div>
                                      <div class="modal-body">
                                        <form id="form_{{ reply.id_str }}">
                                          <input type="hidden" value="{{ reply.id_str }}" name="reply_id">
                                          <input type="hidden" value="{{ tweet_counter['count'] }}" name="tweet_index">
                                          <input type="hidden" value="{{ reply.full_text }}" name="text">
                                          <div class="radio">
                                            <label id="nag_{{ reply.id_str }}">
                                              <input type="radio" name="retrain" value="NAG" required
                                                     id="nag_{{ reply.id_str }}">&nbsp;
                                              NAG</label>
                                          </div>
                                          <div class="radio">
                                            <label id="cag_{{ reply.id_str }}">
                                              <input type="radio" name="retrain" value="CAG" required
                                                     id="cag_{{ reply.id_str }}">&nbsp;
                                              CAG</label>
                                          </div>
                                          <div class="radio">
                                            <label id="oag_{{ reply.id_str }}">
                                              <input type="radio" name="retrain" value="OAG" required
                                                     id="oag_{{ reply.id_str }}">&nbsp;
                                              OAG</label>
                                          </div>
                                          <button class="btn btn-info" type="button" id="button_{{ reply.id_str }}"
                                                  data-dismiss="modal">
                                            Report
                                          </button>
                                        </form>
                                        <script type="text/javascript">
                                          $(function () {
                                            $('#button_{{ reply.id_str }}').click(function () {
                                              data = $('#form_{{ reply.id_str }}').serialize();
                                              var resp = confirm('Are you sure you want to submit');
                                              data_array = $('#form_{{ reply.id_str }}').serializeArray();
                                              if (resp) {
                                                $.ajax({
                                                  url: '/report',
                                                  data: $('#form_{{ reply.id_str }}').serialize(),
                                                  type: 'POST',
                                                  success: function (response) {
                                                    {#alert('Reported successfully');#}
                                                    {#                                                    {{ decrement(counter, 'NAG') }}#}
                                                    console.log('success');
                                                  },
                                                  error: function (error) {
                                                    console.log(error);
                                                    alert('Error submitting the tweet! Server Offline');
                                                    location.reload();
                                                  }
                                                });
                                              }
                                            });
                                          });
                                        </script>
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close
                                        </button>
                                      </div>
                                    </div>

                                  </div>
                                </div>
                                {#                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">#}
                                {#                                  <a class="dropdown-item" href="#">Settings</a>#}
                                {#                                  <a class="dropdown-item" href="#">Activity Log</a>#}
                                {#                                  <div class="dropdown-divider"></div>#}
                                {#                                  <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">Logout</a>#}
                                {#                                </div>#}
                              </td>
                            </tr>
                          {% endfor %}
                        {% endif %}
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    {#                                    <hr>#}
                    <div class="card">
                      <div class="card-header">
                        <i class="fas fa-cloud"></i>
                        Word Cloud for replies
                      </div>
                      <div class="card-body">
                        <img src="{{ url_for('static',filename='wordclouds/'+tweet.tweet.user.screen_name+'/'+tweet.tweet.id_str) }}.jpg"
                             style="width: 100%;height: 100%;" id="wc_{{ tweet.tweet.id_str }}">
                        <script>
                          /* Execute the magnify function: */
                          magnify("wc_{{ tweet.tweet.id_str }}", 5);
                          /* Specify the id of the image, and the strength of the magnifier glass: */
                        </script>
                        {#                        <canvas id="myBarChart_{{ tweet.tweet.id_str }}" width="100%" height="100%"></canvas>#}
                      </div>
                      {#                {{ counter }}#}

                      {#                      <script type="text/javascript">#}
                      {#                        // Set new default font family and font color to mimic Bootstrap's default styling#}
                      {#                        // load_graph('myBarChart')#}
                      {#                        // <script type="text/javascript">#}
                      {#console.log(typeof({{ len(tweet.replies) }}));#}
                      {#console.log(typeof({{ counter | tojson }}));#}
                      {#                        console.log({{ counter | safe }});#}
                      {#                        var counter = [{{ counter['NAG'] }}, {{ counter['CAG'] }}, {{ counter['OAG'] }}, {{ len(tweet.replies) }}];#}
                      {#counter['scale']={{ len(tweet.replies) }};#}
                      {#                        console.log(counter);#}
                      {#                        load_graph("myBarChart_{{ tweet.tweet.id_str }}", counter);#}
                      {#                      </script>#}
                      <!-- <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div> -->
                    </div>
                    <!-- </div> -->
                    <hr>
                    <button type="button" class="btn btn-light" data-toggle="modal"
                            data-target="#pc_{{ tweet.tweet.id_str }}">
                      <i class="fas fa-pie-chart" aria-hidden="true"></i> View Pie Chart
                    </button>
                    <div class="modal fade" id="pc_{{ tweet.tweet.id_str }}" role="dialog">
                      <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                          <div class="modal-header">
                            <h4 class="modal-title"><i class="fas fa-pie-chart" aria-hidden="true"></i>Pie Chart</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                          </div>
                          <div class="modal-body">
                            <canvas id="myBarChart_{{ tweet.tweet.id_str }}" width="100%" height="100%"></canvas>
                            <script type="text/javascript">
                              // Set new default font family and font color to mimic Bootstrap's default styling
                              // load_graph('myBarChart')
                              // <script type="text/javascript">
                              console.log(typeof ({{ len(tweet.replies) }}));
                              console.log(typeof ({{ counter | tojson }}));
                              console.log({{ counter | safe }});
                              var counter = [{{ counter['NAG'] }}, {{ counter['CAG'] }}, {{ counter['OAG'] }}, {{ len(tweet.replies) }}];
                              counter['scale'] ={{ len(tweet.replies) }};
                              console.log(counter);
                              load_graph("myBarChart_{{ tweet.tweet.id_str }}", counter);
                            </script>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close
                            </button>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card-footer small text-muted text-left">
                <i class="far fa-clock"></i> {{ tweet.tweet.created_at }}&nbsp;&nbsp;
                <i
                        class="fas fa-retweet"></i> {{ tweet.tweet.retweet_count }} &nbsp;&nbsp;<i
                      class="far fa-heart"></i> {{ tweet.tweet.favorite_count }}&nbsp;&nbsp;

                <span id="span_{{ tweet.tweet.id_str }}">
                          <i class="far fa-comment"></i>
                          <a class="s-resize" data-toggle="collapse" href="#replies_{{ tweet.tweet.id_str }}"
                             role="button"
                             aria-expanded="false"
                             aria-controls="replies_{{ tweet.tweet.id_str }}"
                             id="button_{{ tweet.tweet.id_str }}"><span
                                  id="span_a_{{ tweet.tweet.id_str }}"> View Comments ({{ len(tweet.replies) }})</span></a>
                          </span>
                <script>
                  $(document).ready(function () {
                    $("#button_{{ tweet.tweet.id_str }}").click(function () {
                      span = document.getElementById('span_a_{{ tweet.tweet.id_str }}');
                      var a = 1;
                      console.log(a);
                      console.log(span);
                      if (span.innerText.startsWith("View")) {
                        console.log('inside if', span.innerHTML)
                        span.innerHTML = "Hide Comments";
                        span.className = "n-resize";
                        var element = document.getElementById("card_body_{{ tweet.tweet.id_str }}");
                        element.scrollIntoView({behavior: "smooth"});

                      } else {
                        span.innerText = "View Comments " + '({{len(tweet.replies)}})';
                        var element = document.getElementById("card_{{ tweet.tweet.id_str }}");
                        element.scrollIntoView({behavior: "smooth"});
                        span.className = "s-resize";
                      }
                    });

                  });
                </script>
              </div>
            </div>
            <script type="text/javascript">
              $(document).ready(function () {
                $('#dataTable_{{tweet.tweet.id_str}}').DataTable({
                  select: {
                    style: 'multi'
                  }
                });
              });
            </script>


          </div>
          {#          {{ increment(tweet_counter, 'count') }}#}
        {% endfor %}
      </div>
    </div>
  </div>
</div>
</div>
</div>
<!-- /.container-fluid -->
<!-- Sticky Footer -->
<footer class="sticky-footer">
  <div class="container my-auto">
    <div class="copyright text-center my-auto">
      <span>Copyright © Your Website 2019</span>
    </div>
  </div>
</footer>
</div>
<!-- /.content-wrapper -->
</div>
<!-- /#wrapper -->
<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
  <i class="fas fa-angle-up"></i>
</a>
<!-- Logout Modal-->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <a class="btn btn-primary" href="login.html">Logout</a>
      </div>
    </div>
  </div>
</div>
<!-- Bootstrap core JavaScript-->
<script src="{{ url_for('static', filename='vendor/jquery/jquery.min.js') }}"></script>
<script src="{{ url_for('static', filename='vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
<!-- Core plugin JavaScript-->
<script src="{{ url_for('static', filename='vendor/jquery-easing/jquery.easing.min.js') }}"></script>
<!-- Page level plugin JavaScript-->
<script src="{{ url_for('static', filename='vendor/datatables/jquery.dataTables.js') }}"></script>
<script src="{{ url_for('static', filename='vendor/datatables/dataTables.bootstrap4.js') }}"></script>
<!-- Custom scripts for all pages-->
<script src="{{ url_for('static', filename='js/sb-admin.min.js') }}"></script>
<!-- Demo scripts for this page-->
<script src="{{ url_for('static', filename='js/demo/datatables-demo.js') }}"></script>
</body>
</html>
